<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Organization Hub - WasteNaut</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../resources/styles/main.css" />
  </head>
  <body>
    <!-- Header Container -->
    <div id="header-container"></div>

    <!-- Main Content -->
    <div class="container py-4">
      <!-- Header -->
      <div id="dashboard" class="row mb-4">
        <div class="col-12">
          <div class="d-flex align-items-center mb-3">
            <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
              <i class="bi bi-building text-white fs-5"></i>
            </div>
            <div>
              <h1 class="h3 mb-1 text-gradient">Organization Hub</h1>
              <p class="text-muted mb-0">Food bank management and resource coordination</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Organization Profile Card -->
      <div class="row g-4 mb-4">
        <div class="col-lg-4">
          <div class="card border-0 bg-dark glow-effect">
            <div class="card-header bg-dark border-bottom">
              <h5 class="mb-0">
                <i class="bi bi-building me-2"></i>Organization Profile
              </h5>
            </div>
            <div class="card-body">
              <div class="text-center mb-3">
                <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 60px; height: 60px;">
                  <i class="bi bi-building text-white fs-3"></i>
                </div>
                <h5 class="text-gradient">Green Valley Food Bank</h5>
                <p class="text-muted small">Serving the community since 2020</p>
              </div>
              <div class="row g-2">
                <div class="col-6">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-geo-alt text-primary me-2"></i>
                    <span class="small">Downtown District</span>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-people text-success me-2"></i>
                    <span class="small">1,250 families</span>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-clock text-warning me-2"></i>
                    <span class="small">Mon-Fri 9AM-5PM</span>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-shield-check text-info me-2"></i>
                    <span class="small">Verified</span>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <button class="btn btn-primary btn-sm w-100">
                  <i class="bi bi-pencil me-1"></i>Edit Profile
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Inventory Summary -->
        <div id="inventory" class="col-lg-8">
          <div class="card border-0 bg-dark">
            <div class="card-header bg-dark border-bottom">
              <h5 class="mb-0">
                <i class="bi bi-boxes me-2"></i>Inventory Summary
              </h5>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-3">
                  <div class="text-center">
                    <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                      <i class="bi bi-apple text-white fs-4"></i>
                    </div>
                    <div class="fw-bold fs-4">245</div>
                    <div class="small text-muted">Fresh Produce</div>
                    <div class="small text-success">Good Stock</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="text-center">
                    <div class="bg-warning rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                      <i class="bi bi-box text-white fs-4"></i>
                    </div>
                    <div class="fw-bold fs-4">89</div>
                    <div class="small text-muted">Canned Goods</div>
                    <div class="small text-warning">Low Stock</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="text-center">
                    <div class="bg-info rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                      <i class="bi bi-droplet text-white fs-4"></i>
                    </div>
                    <div class="fw-bold fs-4">156</div>
                    <div class="small text-muted">Dairy Items</div>
                    <div class="small text-info">Medium Stock</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="text-center">
                    <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                      <i class="bi bi-bread-slice text-white fs-4"></i>
                    </div>
                    <div class="fw-bold fs-4">67</div>
                    <div class="small text-muted">Bakery Items</div>
                    <div class="small text-danger">Critical</div>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <div class="alert alert-warning alert-dismissible fade show" role="alert">
                  <i class="bi bi-exclamation-triangle me-2"></i>
                  <strong>Low Stock Alert:</strong> Bakery items and canned goods need restocking.
                  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Volunteers/Contacts and Pending Requests -->
      <div class="row g-4 mb-4">
        <!-- Volunteers/Contacts List -->
        <div class="col-lg-6">
          <div class="card border-0 bg-dark h-100">
            <div class="card-header bg-dark border-bottom">
              <h5 class="mb-0">
                <i class="bi bi-people me-2"></i>Volunteers & Contacts
              </h5>
            </div>
            <div class="card-body">
              <div class="list-group list-group-flush">
                <div class="list-group-item bg-dark border-secondary">
                  <div class="d-flex align-items-center">
                    <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                      <i class="bi bi-person text-white"></i>
                    </div>
                    <div class="flex-grow-1">
                      <h6 class="mb-1">Sarah Johnson</h6>
                      <p class="mb-1 small text-muted">Volunteer Coordinator</p>
                      <small class="text-success">Available Today</small>
                    </div>
                    <div class="btn-group" role="group">
                      <button class="btn btn-sm btn-outline-primary" onclick="contactVolunteer('sarah_johnson')">
                        <i class="bi bi-chat"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-info" onclick="editVolunteer('sarah_johnson')">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="deleteVolunteer('sarah_johnson')">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="list-group-item bg-dark border-secondary">
                  <div class="d-flex align-items-center">
                    <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                      <i class="bi bi-person text-white"></i>
                    </div>
                    <div class="flex-grow-1">
                      <h6 class="mb-1">Mike Chen</h6>
                      <p class="mb-1 small text-muted">Delivery Driver</p>
                      <small class="text-info">On Route</small>
                    </div>
                    <div class="btn-group" role="group">
                      <button class="btn btn-sm btn-outline-success" onclick="contactVolunteer('mike_chen')">
                        <i class="bi bi-telephone"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-info" onclick="editVolunteer('mike_chen')">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="deleteVolunteer('mike_chen')">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="list-group-item bg-dark border-secondary">
                  <div class="d-flex align-items-center">
                    <div class="bg-warning rounded-circle d-inline-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                      <i class="bi bi-person text-white"></i>
                    </div>
                    <div class="flex-grow-1">
                      <h6 class="mb-1">Lisa Rodriguez</h6>
                      <p class="mb-1 small text-muted">Inventory Manager</p>
                      <small class="text-warning">Break until 2PM</small>
                    </div>
                    <div class="btn-group" role="group">
                      <button class="btn btn-sm btn-outline-warning" onclick="contactVolunteer('lisa_rodriguez')">
                        <i class="bi bi-envelope"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-primary" onclick="editVolunteer('lisa_rodriguez')">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="deleteVolunteer('lisa_rodriguez')">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <button class="btn btn-primary btn-sm w-100">
                  <i class="bi bi-person-plus me-1"></i>Add Volunteer
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Pending Requests Queue -->
        <div id="requests" class="col-lg-6">
          <div class="card border-0 bg-dark h-100">
            <div class="card-header bg-dark border-bottom">
              <h5 class="mb-0">
                <i class="bi bi-clock me-2"></i>Pending Requests
              </h5>
            </div>
            <div class="card-body">
              <div class="list-group list-group-flush">
                <div class="list-group-item bg-dark border-secondary">
                  <div class="d-flex justify-content-between align-items-start">
                    <div>
                      <h6 class="mb-1">Family of 4 - Fresh Vegetables</h6>
                      <p class="mb-1 small text-muted">Requested: 2 hours ago</p>
                      <span class="badge bg-success">High Priority</span>
                    </div>
                    <div class="btn-group" role="group">
                      <button class="btn btn-sm btn-success" onclick="fulfillRequest(1)">
                        <i class="bi bi-check-circle"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-primary" onclick="editRequest(1)">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="deleteRequest(1)">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="list-group-item bg-dark border-secondary">
                  <div class="d-flex justify-content-between align-items-start">
                    <div>
                      <h6 class="mb-1">Senior Center - Canned Goods</h6>
                      <p class="mb-1 small text-muted">Requested: 4 hours ago</p>
                      <span class="badge bg-warning">Medium Priority</span>
                    </div>
                    <div class="btn-group" role="group">
                      <button class="btn btn-sm btn-warning" onclick="fulfillRequest(2)">
                        <i class="bi bi-clock"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-primary" onclick="editRequest(2)">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="deleteRequest(2)">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="list-group-item bg-dark border-secondary">
                  <div class="d-flex justify-content-between align-items-start">
                    <div>
                      <h6 class="mb-1">Community Kitchen - Bulk Items</h6>
                      <p class="mb-1 small text-muted">Requested: 6 hours ago</p>
                      <span class="badge bg-info">Low Priority</span>
                    </div>
                    <div class="btn-group" role="group">
                      <button class="btn btn-sm btn-info" onclick="fulfillRequest(3)">
                        <i class="bi bi-arrow-right"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-primary" onclick="editRequest(3)">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="deleteRequest(3)">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-3">
                <button class="btn btn-outline-primary btn-sm w-100">
                  <i class="bi bi-list-ul me-1"></i>View All Requests
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons and KPI Charts -->
      <div class="row g-4 mb-4">
        <!-- Action Buttons -->

        <!-- KPI Charts Placeholder -->
        <div class="col-lg-8">
          <div class="card border-0 bg-dark">
            <div class="card-header bg-dark border-bottom">
              <h5 class="mb-0">
                <i class="bi bi-graph-up me-2"></i>Key Performance Indicators
              </h5>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="card border-0 bg-dark glow-effect">
                    <div class="card-body text-center p-3">
                      <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                        <i class="bi bi-people text-white fs-4"></i>
                      </div>
                      <div class="fw-bold fs-3">1,250</div>
                      <div class="small text-muted">Families Served</div>
                      <div class="small text-success">+15% this month</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card border-0 bg-dark glow-effect">
                    <div class="card-body text-center p-3">
                      <div class="bg-success rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                        <i class="bi bi-recycle text-white fs-4"></i>
                      </div>
                      <div class="fw-bold fs-3">2,847</div>
                      <div class="small text-muted">Lbs Food Rescued</div>
                      <div class="small text-success">+22% this month</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card border-0 bg-dark glow-effect">
                    <div class="card-body text-center p-3">
                      <div class="bg-warning rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                        <i class="bi bi-clock text-white fs-4"></i>
                      </div>
                      <div class="fw-bold fs-3">94%</div>
                      <div class="small text-muted">On-Time Delivery</div>
                      <div class="small text-success">+3% this month</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card border-0 bg-dark glow-effect">
                    <div class="card-body text-center p-3">
                      <div class="bg-info rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                        <i class="bi bi-star text-white fs-4"></i>
                      </div>
                      <div class="fw-bold fs-3">4.8</div>
                      <div class="small text-muted">Satisfaction Rating</div>
                      <div class="small text-success">+0.2 this month</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark border-top py-4">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-6">
            <p class="mb-0 text-muted">&copy; 2024 WasteNaut. Navigating the future of sustainable resource management.</p>
          </div>
          <div class="col-md-6 text-md-end">
            <div class="footer-btn-container">
              <button class="footer-btn text-muted me-3" data-info="contact@wastenaut.com" title="Email us">
                <i class="bi bi-envelope"></i>
              </button>
              <button class="footer-btn text-muted me-3" data-info="+1-555-WASTE-NAUT" title="Call us">
                <i class="bi bi-telephone"></i>
              </button>
              <button class="footer-btn text-muted" data-info="WasteNaut - Fighting food waste through space-age technology" title="About us">
                <i class="bi bi-info-circle"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap JS bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Custom JS -->
    <script src="../resources/scripts/main.js"></script>
    <script src="../resources/scripts/auth.js"></script>
    <script src="../resources/scripts/header-include.js"></script>
    <script src="../resources/scripts/header.js"></script>
    <script>
      // Organization dashboard functionality
      function fulfillRequest(requestId) {
        if (window.showNotification) {
          window.showNotification(`Request ${requestId} fulfilled successfully!`, 'success');
        } else {
          showAlert(`Request ${requestId} fulfilled successfully!`, 'success');
        }
      }

      function openInventoryManagement() {
        window.location.href = 'inventory-management.html';
      }

      function openSmartMatching() {
        window.location.href = 'smart-matching.html';
      }

      function openCommunicationHub() {
        window.location.href = 'communication-hub.html';
      }

      function generateReport() {
        if (window.showNotification) {
          window.showNotification('Generating monthly report...', 'info');
        } else {
          showAlert('Generating monthly report...', 'info');
        }
      }

      function requestDonation() {
        if (window.showNotification) {
          window.showNotification('Opening donation request form...', 'info');
        } else {
          showAlert('Opening donation request form...', 'info');
        }
      }

      // Volunteer management functions
      function contactVolunteer(volunteerId) {
        showAlert(`Contacting volunteer ${volunteerId}...`, 'info');
      }

      function editVolunteer(volunteerId) {
        const newRole = prompt('Enter new role for volunteer:');
        if (newRole) {
          showAlert(`Updated volunteer ${volunteerId} role to: ${newRole}`, 'success');
        }
      }

      function deleteVolunteer(volunteerId) {
        if (confirm(`Are you sure you want to remove volunteer ${volunteerId}?`)) {
          showAlert(`Volunteer ${volunteerId} removed successfully`, 'success');
          // In a real app, this would remove the volunteer from the list
        }
      }

      // Request management functions
      function editRequest(requestId) {
        const newPriority = prompt('Enter new priority (High/Medium/Low):');
        if (newPriority) {
          showAlert(`Updated request ${requestId} priority to: ${newPriority}`, 'success');
        }
      }

      function deleteRequest(requestId) {
        if (confirm(`Are you sure you want to delete request ${requestId}?`)) {
          showAlert(`Request ${requestId} deleted successfully`, 'success');
          // In a real app, this would remove the request from the list
        }
      }

      // Legacy alert function for backward compatibility
      function showAlert(message, type) {
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
        alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
        alertDiv.innerHTML = `
          ${message}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        document.body.appendChild(alertDiv);

        // Auto-remove after 5 seconds
        setTimeout(() => {
          if (alertDiv.parentNode) {
            alertDiv.remove();
          }
        }, 5000);
      }


      // Footer button popup functionality
      function createPopup(text, button) {
        // Remove any existing popups
        const existingPopups = document.querySelectorAll('.wastenaut-popup');
        existingPopups.forEach(popup => popup.remove());
        
        // Create popup element
        const popup = document.createElement('div');
        popup.className = 'wastenaut-popup';
        popup.textContent = text;
        
        // Calculate position more reliably
        const buttonRect = button.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const popupWidth = Math.min(300, viewportWidth - 40);
        
        // Perfect centering above the button
        const popupHeight = 50; // More accurate height
        const spacing = 8; // Space between button and popup
        
        // Always try to position above first
        let topPosition = buttonRect.top - popupHeight - spacing;
        let arrowDirection = 'down';
        
        // If not enough space above, position below
        if (topPosition < 10) {
          topPosition = buttonRect.bottom + spacing;
          arrowDirection = 'up';
        }
        
        // Perfect horizontal centering - exact center of button
        let leftPosition = buttonRect.left + (buttonRect.width / 2);
        
        // Only adjust if popup would go off-screen
        const halfPopupWidth = popupWidth / 2;
        if (leftPosition - halfPopupWidth < 10) {
          leftPosition = halfPopupWidth + 10;
        } else if (leftPosition + halfPopupWidth > viewportWidth - 10) {
          leftPosition = viewportWidth - halfPopupWidth - 10;
        }
        
        popup.style.cssText = `
          position: fixed;
          top: ${topPosition}px;
          left: ${leftPosition}px;
          transform: translateX(-50%);
          background: rgba(10, 10, 10, 0.95);
          border: 1px solid #00ff88;
          border-radius: 8px;
          padding: 12px 16px;
          color: #00ff88;
          font-size: 14px;
          font-family: 'Exo 2', sans-serif;
          z-index: 9999;
          box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
          backdrop-filter: blur(10px);
          white-space: normal;
          max-width: 300px;
          width: ${popupWidth}px;
          opacity: 0;
          transition: opacity 0.3s ease;
          cursor: text;
          user-select: text;
          pointer-events: auto;
        `;
        
        // Add arrow pointing to button
        const arrow = document.createElement('div');
        arrow.style.cssText = `
          position: absolute;
          ${arrowDirection === 'down' ? 'top: 100%;' : 'bottom: 100%;'}
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 6px solid transparent;
          border-right: 6px solid transparent;
          ${arrowDirection === 'down' ? 'border-top: 6px solid #00ff88;' : 'border-bottom: 6px solid #00ff88;'}
        `;
        popup.appendChild(arrow);
        
        // Add to body
        document.body.appendChild(popup);
        
        // Fade in
        setTimeout(() => {
          popup.style.opacity = '1';
        }, 10);
        
        // Add hover functionality to popup
        popup.addEventListener('mouseenter', function() {
          popup.style.opacity = '1';
          if (popup.hideTimeout) {
            clearTimeout(popup.hideTimeout);
            popup.hideTimeout = null;
          }
        });
        
        popup.addEventListener('mouseleave', function() {
          popup.style.opacity = '0';
          popup.hideTimeout = setTimeout(() => {
            if (popup.parentNode) {
              popup.remove();
            }
          }, 300);
        });
      }
      
      function removePopup() {
        const existingPopups = document.querySelectorAll('.wastenaut-popup');
        existingPopups.forEach(popup => {
          popup.style.opacity = '0';
          setTimeout(() => {
            if (popup.parentNode) {
              popup.remove();
            }
          }, 300);
        });
      }

      // Initialize page protection and footer buttons when page loads
      document.addEventListener('DOMContentLoaded', function() {
        // Protect this page - only org users can access
        if (!authManager.protectPage('org')) {
          return;
        }
        const emailBtn = document.querySelector('button[data-info="contact@wastenaut.com"]');
        const phoneBtn = document.querySelector('button[data-info="+1-555-WASTE-NAUT"]');
        const infoBtn = document.querySelector('button[data-info="WasteNaut - Fighting food waste through space-age technology"]');
        
        if (emailBtn) {
          let emailTimeout;
          emailBtn.addEventListener('mouseenter', function() {
            clearTimeout(emailTimeout);
            createPopup('contact@wastenaut.com', this);
          });
          emailBtn.addEventListener('mouseleave', function() {
            emailTimeout = setTimeout(() => {
              const popup = document.querySelector('.wastenaut-popup');
              if (popup && !popup.matches(':hover')) {
                removePopup();
              }
            }, 150);
          });
        }
        
        if (phoneBtn) {
          let phoneTimeout;
          phoneBtn.addEventListener('mouseenter', function() {
            clearTimeout(phoneTimeout);
            createPopup('+1-555-WASTE-NAUT', this);
          });
          phoneBtn.addEventListener('mouseleave', function() {
            phoneTimeout = setTimeout(() => {
              const popup = document.querySelector('.wastenaut-popup');
              if (popup && !popup.matches(':hover')) {
                removePopup();
              }
            }, 150);
          });
        }
        
        if (infoBtn) {
          let infoTimeout;
          infoBtn.addEventListener('mouseenter', function() {
            clearTimeout(infoTimeout);
            createPopup('WasteNaut - Fighting food waste through space-age technology', this);
          });
          infoBtn.addEventListener('mouseleave', function() {
            infoTimeout = setTimeout(() => {
              const popup = document.querySelector('.wastenaut-popup');
              if (popup && !popup.matches(':hover')) {
                removePopup();
              }
            }, 150);
          });
        }
      });
    </script>
  </body>
</html>
