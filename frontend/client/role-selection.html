<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Choose Your Role - WasteNaut</title>
    <!-- Cache bust: Updated 2025-10-29 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="resources/styles/main.css" />
    
    <style>
        .role-card {
            background: rgba(10, 10, 10, 0.8) !important;
            border: 1px solid rgba(0, 255, 136, 0.3) !important;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.1);
        }
        
        .role-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 255, 136, 0.6) !important;
            box-shadow: 0 15px 40px rgba(0, 255, 136, 0.2);
        }
        
        .role-card .card-title {
            color: #00ff88 !important;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .role-card .card-text {
            color: rgba(255, 255, 255, 0.8) !important;
        }
        
        .role-card .text-success {
            color: #00ff88 !important;
        }
        
        .display-4 {
            background: linear-gradient(45deg, #00ff88, #00d4aa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }
        
        .lead {
            color: rgba(255, 255, 255, 0.7) !important;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a0a0a 100%);
            min-height: 100vh;
        }
    </style>
  </head>
  <body>
    <!-- Header Container -->
    <div id="header-container"></div>

    <!-- Main Content with Background -->
    <div class="min-vh-100 d-flex align-items-center" style="background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a0a0a 100%);">
        <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="text-center mb-5">
                    <h1 class="display-4 text-light mb-3">CHOOSE YOUR ROLE</h1>
                    <p class="lead text-muted">Select how you'd like to help fight food waste and feed your community</p>
            </div>

                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card role-card h-100">
                            <div class="card-body text-center">
                                <div class="mb-3">
                                    <i class="bi bi-person-circle text-primary" style="font-size: 3rem;"></i>
                  </div>
                                <h5 class="card-title text-light">Individual Recipient</h5>
                                <p class="card-text text-muted">Seeking supplies for personal or family use? Connect with local food banks and donors to access fresh food and essential supplies.</p>
                                <ul class="list-unstyled text-start">
                                    <li class="text-success"><i class="bi bi-check-circle me-2"></i>Find nearby food banks and donors</li>
                  </ul>
                  <button class="btn btn-primary w-100" onclick="selectRole('individual')">
                                    Continue as Individual
                  </button>
                </div>
              </div>
            </div>

                    <div class="col-md-4 mb-4">
                        <div class="card role-card h-100">
                            <div class="card-body text-center">
                                <div class="mb-3">
                                    <i class="bi bi-building text-success" style="font-size: 3rem;"></i>
                  </div>
                                <h5 class="card-title text-light">Organization Recipient</h5>
                                <p class="card-text text-muted">Non-profit, shelter, or community group seeking supplies for distribution? Connect with donors and manage inventory for your community.</p>
                                <ul class="list-unstyled text-start">
                                    <li class="text-success"><i class="bi bi-check-circle me-2"></i>Access surplus food donations</li>
                  </ul>
                  <button class="btn btn-success w-100" onclick="selectRole('organization')">
                                    Continue as Organization
                  </button>
                </div>
              </div>
            </div>

                    <div class="col-md-4 mb-4">
                        <div class="card role-card h-100">
                            <div class="card-body text-center">
                                <div class="mb-3">
                                    <i class="bi bi-gift text-warning" style="font-size: 3rem;"></i>
                  </div>
                                <h5 class="card-title text-light">Want to Donate Food?</h5>
                                <p class="card-text text-muted">Individual or business with surplus food? Submit donation listings and coordinate with food banks to reduce waste and help your community.</p>
                                <ul class="list-unstyled text-start">
                                    <li class="text-success"><i class="bi bi-check-circle me-2"></i>Connect with local food banks</li>
                  </ul>
                                <button class="btn btn-primary w-100" onclick="selectRole('donor')">
                                    Start Donating
                  </button>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
          </div>

    <!-- Individual Sign-up Modal -->
    <div class="modal fade" id="individualSignupModal" tabindex="-1" aria-labelledby="individualSignupModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark border border-primary">
                <div class="modal-header border-bottom border-primary">
                    <h5 class="modal-title text-primary" id="individualSignupModalLabel">
                        <i class="bi bi-person me-2"></i>Individual Sign-up
                  </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-3">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>Demo Mode:</strong> Email and password are pre-filled for testing. You can use these credentials to log in after sign-up.
                    </div>
                    <form id="individualSignupForm">
                        <div class="mb-3">
                            <label for="individualName" class="form-label text-light">Full Name</label>
                            <input type="text" class="form-control bg-dark border-primary text-light" id="individualName" required>
                        </div>
                        <div class="mb-3">
                            <label for="individualEmail" class="form-label text-light">Email Address</label>
                            <input type="email" class="form-control bg-dark border-primary text-light" id="individualEmail" value="demo@individual.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="individualPhone" class="form-label text-light">Phone Number</label>
                            <input type="tel" class="form-control bg-dark border-primary text-light" id="individualPhone">
                        </div>
                        <div class="mb-3">
                            <label for="individualPassword" class="form-label text-light">Password</label>
                            <input type="password" class="form-control bg-dark border-primary text-light" id="individualPassword" value="demo123" required>
                        </div>
                        <div class="mb-3">
                            <label for="individualAddress" class="form-label text-light">Address</label>
                            <textarea class="form-control bg-dark border-primary text-light" id="individualAddress" rows="2"></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input border-primary" id="individualTerms" required>
                            <label class="form-check-label text-light" for="individualTerms">
                                I agree to the <a href="#" class="text-primary">Terms of Service</a> and <a href="#" class="text-primary">Privacy Policy</a>
                            </label>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-person-plus me-2"></i>Create Individual Account
                            </button>
                    </div>
                    </form>
                    </div>
                  </div>
                </div>
              </div>

    <!-- Organization Sign-up Modal -->
    <div class="modal fade" id="organizationSignupModal" tabindex="-1" aria-labelledby="organizationSignupModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark border border-success">
                <div class="modal-header border-bottom border-success">
                    <h5 class="modal-title text-success" id="organizationSignupModalLabel">
                        <i class="bi bi-building me-2"></i>Organization Sign-up
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-3">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>Demo Mode:</strong> Email and password are pre-filled for testing. You can use these credentials to log in after sign-up.
                    </div>
                    <form id="organizationSignupForm">
                        <div class="mb-3">
                            <label for="orgName" class="form-label text-light">Organization Name</label>
                            <input type="text" class="form-control bg-dark border-success text-light" id="orgName" required>
                        </div>
                        <div class="mb-3">
                            <label for="orgType" class="form-label text-light">Organization Type</label>
                            <select class="form-select bg-dark border-success text-light" id="orgType" required>
                                <option value="">Select organization type</option>
                                <option value="foodbank">Food Bank</option>
                                <option value="shelter">Homeless Shelter</option>
                                <option value="community">Community Center</option>
                                <option value="church">Religious Organization</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="orgContactName" class="form-label text-light">Contact Person</label>
                            <input type="text" class="form-control bg-dark border-success text-light" id="orgContactName" required>
                        </div>
                        <div class="mb-3">
                            <label for="orgEmail" class="form-label text-light">Email Address</label>
                            <input type="email" class="form-control bg-dark border-success text-light" id="orgEmail" value="demo@organization.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="orgPhone" class="form-label text-light">Phone Number</label>
                            <input type="tel" class="form-control bg-dark border-success text-light" id="orgPhone" required>
                        </div>
                        <div class="mb-3">
                            <label for="orgPassword" class="form-label text-light">Password</label>
                            <input type="password" class="form-control bg-dark border-success text-light" id="orgPassword" value="demo123" required>
                        </div>
                        <div class="mb-3">
                            <label for="orgAddress" class="form-label text-light">Organization Address</label>
                            <textarea class="form-control bg-dark border-success text-light" id="orgAddress" rows="2" required></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input border-success" id="orgTerms" required>
                            <label class="form-check-label text-light" for="orgTerms">
                                I agree to the <a href="#" class="text-success">Terms of Service</a> and <a href="#" class="text-success">Privacy Policy</a>
                            </label>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="bi bi-building-add me-2"></i>Create Organization Account
                            </button>
            </div>
                    </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Donor Sign-up Modal -->
    <div class="modal fade" id="donorSignupModal" tabindex="-1" aria-labelledby="donorSignupModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark border border-warning">
                <div class="modal-header border-bottom border-warning">
                    <h5 class="modal-title text-warning" id="donorSignupModalLabel">
                        <i class="bi bi-gift me-2"></i>Donor Sign-up
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-3">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>Demo Mode:</strong> Email and password are pre-filled for testing. You can use these credentials to log in after sign-up.
                    </div>
                    <form id="donorSignupForm">
                        <div class="mb-3">
                            <label for="donorName" class="form-label text-light">Full Name</label>
                            <input type="text" class="form-control bg-dark border-warning text-light" id="donorName" required>
                        </div>
                        <div class="mb-3">
                            <label for="donorEmail" class="form-label text-light">Email Address</label>
                            <input type="email" class="form-control bg-dark border-warning text-light" id="donorEmail" value="demo@individual.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="donorPhone" class="form-label text-light">Phone Number</label>
                            <input type="tel" class="form-control bg-dark border-warning text-light" id="donorPhone">
                        </div>
                        <div class="mb-3">
                            <label for="donorPassword" class="form-label text-light">Password</label>
                            <input type="password" class="form-control bg-dark border-warning text-light" id="donorPassword" value="demo123" required>
                        </div>
                        <div class="mb-3">
                            <label for="donorBusiness" class="form-label text-light">Business/Organization (Optional)</label>
                            <input type="text" class="form-control bg-dark border-warning text-light" id="donorBusiness">
                        </div>
                        <div class="mb-3">
                            <label for="donorAddress" class="form-label text-light">Address</label>
                            <textarea class="form-control bg-dark border-warning text-light" id="donorAddress" rows="2"></textarea>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input border-warning" id="donorTerms" required>
                            <label class="form-check-label text-light" for="donorTerms">
                                I agree to the <a href="#" class="text-warning">Terms of Service</a> and <a href="#" class="text-warning">Privacy Policy</a>
                            </label>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-warning btn-lg">
                                <i class="bi bi-gift me-2"></i>Create Donor Account
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Header and App Scripts -->
    <script src="resources/scripts/main.js"></script>
    <script src="resources/scripts/auth.js"></script>
    <script src="resources/scripts/header-include.js"></script>
    <script src="resources/scripts/header.js"></script>
    
    <script>
        console.log('Role selection JavaScript loaded!');
        
      function selectRole(role) {
            console.log('selectRole called with:', role);
            
            const modalId = `${role}SignupModal`;
            const modalElement = document.getElementById(modalId);
            console.log('Modal element:', modalElement);
            
            if (modalElement) {
                const modal = new bootstrap.Modal(modalElement);
                modal.show();
                console.log('Modal shown');
            } else {
                console.error('Modal not found:', modalId);
            }
        }

        function handleSignup(role, form) {
            console.log('handleSignup called with role:', role);
            
            // Show success message
            alert(`Account created successfully! Welcome to WasteNaut as a ${role}.`);
            
            // Close modal
            const modalId = `${role}SignupModal`;
            const modalElement = document.getElementById(modalId);
            if (modalElement) {
                const modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                }
            }
            
            // Clear form
            form.reset();
            
            // Redirect to appropriate dashboard (demo)
            setTimeout(() => {
        switch(role) {
          case 'individual':
                        window.location.href = 'individual-dashboard.html';
            break;
          case 'organization':
                        window.location.href = 'organization-foodbank-dashboard.html';
            break;
          case 'donor':
                        window.location.href = 'individual-dashboard.html'; // Donors use individual dashboard
            break;
          default:
                        window.location.href = 'index.html';
                }
            }, 1500);
        }

        // Handle form submissions - MORE ROBUST VERSION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up form handlers');
            
            // Individual sign-up form
            const individualForm = document.getElementById('individualSignupForm');
            console.log('Individual form found:', individualForm);
            if (individualForm) {
                individualForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    console.log('Individual form submitted!');
                    handleSignup('individual', this);
                });
                
                // Also add click handler to the button directly
                const individualBtn = individualForm.querySelector('button[type="submit"]');
                if (individualBtn) {
                    individualBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Individual button clicked!');
                        handleSignup('individual', individualForm);
                    });
                }
            }

            // Organization sign-up form
            const organizationForm = document.getElementById('organizationSignupForm');
            console.log('Organization form found:', organizationForm);
            if (organizationForm) {
                organizationForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    console.log('Organization form submitted!');
                    handleSignup('organization', this);
                });
                
                const orgBtn = organizationForm.querySelector('button[type="submit"]');
                if (orgBtn) {
                    orgBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Organization button clicked!');
                        handleSignup('organization', organizationForm);
                    });
                }
            }

            // Donor sign-up form
            const donorForm = document.getElementById('donorSignupForm');
            console.log('Donor form found:', donorForm);
            if (donorForm) {
                donorForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    console.log('Donor form submitted!');
                    handleSignup('donor', this);
                });
                
                const donorBtn = donorForm.querySelector('button[type="submit"]');
                if (donorBtn) {
                    donorBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Donor button clicked!');
                        handleSignup('donor', donorForm);
                    });
                }
            }
      });
    </script>
  </body>
</html>